/*
 * domready
 * https://github.com/alanclarke/domready.js
 * logic stripped from https://github.com/jquery/
 * Copyright (c) 2012 Alan Clarke
 * Licensed under the GPL license.
 */

/*
 *  after
 *  https://github.com/alanclarke/after.js
 *
 *  Copyright (c) 2012 Alan Clarke
 *  Licensed under the GPL license.
 *
 *  structure and logic largely taken from http://jquery.lukelutman.com/plugins/pseudo/
 *  but uses a different technique to scan and apply rules which avoids the requirement for special syntax
 *  and refactored to remove jquery dependency
 */

function domready(e){var t=this;t.readyWait=1,t.DOMContentLoaded=function(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",t.DOMContentLoaded,!1),t.ready()):document.readyState==="complete"&&(document.detachEvent("onreadystatechange",t.DOMContentLoaded),t.ready())},t.ready=function(n){if(n===!0?--t.readyWait:t.isReady)return;if(!document.body)return setTimeout(t.ready,1);t.isReady=!0;if(n!==!0&&--t.readyWait>0)return;return!e||e()};if(document.readyState==="complete")setTimeout(t.ready,1);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",DOMContentLoaded,!1),window.addEventListener("load",t.ready,!1);else{document.attachEvent("onreadystatechange",DOMContentLoaded),window.attachEvent("onload",t.ready);var n=!1;try{n=window.frameElement==null&&document.documentElement}catch(r){}n&&n.doScroll&&function i(){if(!t.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}t.ready()}}()}}function getElements(e,t){if(!e||!e.length||e.length===0)return[];var n=[t||document.body],r=[];e=e.split(" ");for(var i=0;i<e.length;i++){var s={id:"",tag:"*",clas:[]},o,u,a=e[i];while(a.length>0)u=a.search(/.[#\.]/)+1||a.length,o=a.substr(0,u),o.substr(0,1)==="#"?s.id=o.substr(1):o.substr(0,1)==="."?s.clas.push(o.substr(1)):s.tag=o,a=a.substr(u);while(n.length>0){var f=[],l=n.shift().getElementsByTagName(s.tag);for(var c=0;c<l.length;c++)f.push(l[c]);while(f.length>0){var h=!0,p=f.shift();s.id&&p.id!==s.id&&(h=!1);for(c=0;c<s.clas.length;c++){var d=s.clas[c];if(d.charAt(d.length-1)==="*"){var v="\\s"+d.substr(0,d.length-1)+"\\S*\\s";if(!(new RegExp(v)).test(" "+p.className+" ")){h=!1;break}}else if((" "+p.className+" ").indexOf(" "+d+" ")===-1){h=!1;break}}h&&r.push(p)}}n=r,r=[]}return n}function after(){function t(t){if(t&&t.length){var n=t.match(e.text)[1],r=n.match(e.url);return r?'<img src="'+r[1]+'" />':n}}function n(e,n,r){var i=r.style;for(var s=0;s<n.length;s++){var o=n[s],u=getElements(".pseudo-after",n[s]);u.length||(u=document.createElement("span"),o.appendChild(u)),u.className="pseudo-after",u.innerHTML=t(r.style.content);for(var a in i)if(i[a])try{u.style[a]=i[a]}catch(f){}}}var e={text:/^['"]?(.+?)["']?$/,url:/^url\(["']?(.+?)['"]?\)$/};for(var r=0;r<document.styleSheets.length;r++){var i;document.styleSheets[r].cssRules?i=document.styleSheets[r].cssRules:document.styleSheets[r].rules?i=document.styleSheets[r].rules:i=[];for(var s=0;s<!i?0:i.length;s++){var o=i[s],u=getElements(o.selectorText.replace(/:+\w+/gi,""));/:+unknown/gi.test(o.selectorText)&&o.style.content&&u.length&&n("before",u,o)}}}typeof define=="function"&&define.amd&&define("src/domready/domready",[],domready),typeof define=="function"&&define.amd&&define("src/getElements",[],getElements),typeof define=="function"&&define.amd&&define("src/after",["src/getElements"],function(e){after(e)}),typeof define=="function"&&define.amd?define("src/after.run.js",["src/domready/domready","src/after"],function(e,t){return e(t)}):domready&&after&&domready(after)